/*! Fabrik */
class FbSubForm{constructor(){document.addEventListener("subform-row-add",e=>this.handleAdd(e)),document.addEventListener("subform-row-remove",e=>this.handleRemove(e))}handleRemove(e){this.remGroup=e.detail.row,this.remInputs=this.remGroup.querySelectorAll("input, select"),this.remInputs.forEach(e=>{for(var[d,t]of Object.entries(FabrikAdmin.model.fields))void 0!==FabrikAdmin.model.fields[d][e.id]&&delete FabrikAdmin.model.fields[d][e.id]}),this.remInputs=null,this.remGroup=null}handleAdd(e){this.addGroup=e.detail.row,this.addInputs=this.addGroup.querySelectorAll("input, select"),0==this.addInputs.length?this.addInputsPeriodical=this.getAddInputs.periodical(500,this):this.addSetUp()}addSetUp(){this.addInputs.forEach(d=>{for(var[t,e]of Object.entries(FabrikAdmin.model.fields)){let e=!1;var s,i,a=d.id,r=a.replace(this.addGroup.dataset.group,this.addGroup.dataset.baseName+"X");void 0!==FabrikAdmin.model.fields[t][r]&&(i=a.match(/__datasources(\d+)__/)[1],(s={...FabrikAdmin.model.fields[t][r].options}).isTemplate=!1,s.templateName=r,s.conn=s.conn.replace("__datasourcesX__",`__datasources${i}__`),"element"==t&&(s.table=s.table.replace("__datasourcesX__",`__datasources${i}__`)),r="element"==t?"elementElement":"fabriktablesElement",(i=new window[r](a,s)).el=document.id(a),e=!0),!1!==e&&(FabrikAdmin.model.fields[t][a]=i)}}),this.addInputs=null,this.addGroup=null}getAddInputs(){(this.addInputs=this.addGroup.querySelectorAll("input, select"))&&(this.addSetUp(),clearInterval(this.addInputsPeriodical))}}
//# sourceMappingURL=fabriksubform-min.js.map