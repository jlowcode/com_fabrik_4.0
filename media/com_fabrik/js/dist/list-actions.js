/*! Fabrik */
define(["jquery","fab/tipsBootStrapMock"],function(t,o){return new Class({Implements:[Options],options:{selector:"ul.fabrik_action, .btn-group.fabrik_action",method:"floating",floatPos:"bottom"},initialize:function(t,e){this.setOptions(e),this.list=t,this.actions=[],this.setUpSubMenus(),Fabrik.addEvent("fabrik.list.update",function(t,e){this.observe()}.bind(this)),this.observe()},observe:function(){"floating"===this.options.method?this.setUpFloating():this.setUpDefault()},setUpSubMenus:function(){this.list.form&&(this.actions=this.list.form.getElements(this.options.selector),this.actions.each(function(t){var e,i,n;t.getElement("ul")&&(t=t.getElement("ul"),e=new Element("div").adopt(t.clone()),(i=t.getPrevious()).getElement(".fabrikTip")&&(i=i.getElement(".fabrikTip")),n=Fabrik.tips?Fabrik.tips.options:{},n=Object.merge(Object.clone(n),{showOn:"click",hideOn:"click",position:"bottom",content:e}),new o(i,n),t.dispose())}))},setUpDefault:function(){this.actions=this.list.form.getElements(this.options.selector),this.actions.each(function(e){var t;!e.getParent().hasClass("fabrik_buttons")&&(e.fade(.6),t=e.getParent(".fabrik_row")?e.getParent(".fabrik_row"):e.getParent(".fabrik___heading"))&&t.addEvents({mouseenter:function(t){e.fade(.99)},mouseleave:function(t){e.fade(.6)}})})},setUpFloating:function(){var e,i=!1,t=(this.list.form.getElements(this.options.selector).each(function(n){var t;n.getParent(".fabrik_row")&&(e=n.getParent(".fabrik_row").getElement("input[type=checkbox]"))&&(i=!0,t=function(t,e){var i=n.getParent();return i.store("activeRow",n.getParent(".fabrik_row")),i}.bind(this.list),t={position:this.options.floatPos,showOn:"change",hideOn:"click",content:t,heading:"Edit: ",hideFn:function(t){return!t.target.checked},showFn:function(t,e){return Fabrik.activeRow=n.getParent().retrieve("activeRow"),e.store("list",this.list),t.target.checked}.bind(this.list)},t=Fabrik.tips?Object.merge(Object.clone(Fabrik.tips.options),t):t,new o(e,t))}.bind(this)),this.list.form.getElements(".fabrik_select input[type=checkbox]").addEvent("click",function(t){Fabrik.activeRow=t.target.getParent(".fabrik_row")}),this.list.form.getElement("input[name=checkAll]")),n=("null"!==typeOf(t)&&t.store("listid",this.list.id),function(t){t=t.getParent(".fabrik___heading");return"null"!==typeOf(t)?t.getElement(this.options.selector):""}.bind(this)),s=Fabrik.tips?Object.clone(Fabrik.tips.options):{},s=Object.merge(s,{position:this.options.floatPos,html:!0,showOn:"click",hideOn:"click",content:n,heading:"Edit all: ",hideFn:function(t){return!t.target.checked},showFn:function(t,e){return e.retrieve("tip").click.store("list",this.list),t.target.checked}.bind(this.list)});new o(t,s);this.list.form.getElements(".fabrik_actions")&&i&&this.list.form.getElements(".fabrik_actions").hide(),this.list.form.getElements(".fabrik_calculation")&&(n=this.list.form.getElements(".fabrik_calculation").getLast(),"null"!==typeOf(n))&&n.hide()}})});
//# sourceMappingURL=list-actions.js.map