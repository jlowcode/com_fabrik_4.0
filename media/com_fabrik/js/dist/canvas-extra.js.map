{"version":3,"file":"canvas-extra.js","sources":["../canvas-extra.js"],"names":["CanvasRenderingContext2D","prototype","__defineGetter__","this","canvas","width","height","blackAndWhite","frame","getImageData","i","data","length","v","putImageData","flipVertically","save","scale","translate","drawImage","restore","flipHorizontally","turn","clockwise","tmpCanvas","document","createElement","rad","style","display","body","appendChild","getContext","Math","PI","rotate","removeChild","resize","ratio","isPortrait","_urlDropped","url","x","y","drawBorder","self","img","addEventListener","ratioX","ratioY","min","strokeStyle","lineWidth","strokeRect","src","initDnD","e","preventDefault","dt","dataTransfer","posx","clientX","scrollLeft","documentElement","posy","clientY","scrollTop","offsetLeft","parentNode","offsetTop","files","types","contains","type","getData","file","reader","FileReader","onload","target","result","readAsDataURL","poster","text","size","fillStyle","fillRect","textAlign","textBaseline","font","fillText","initCrop","isMobile","initCrop_mobile","initCrop_desktop","orgX","orgY","buffer","click2","removeEventListener","crop","click1","cropbox","id","mousedown","mousemove","left","top","mouseup","offsetWidth","offsetHeight"],"mappings":"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"}